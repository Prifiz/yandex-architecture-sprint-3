# Задание 1.1

## Функциональность монолита

### Управление отоплением:

* Пользователи могут удалённо включать/выключать отопление в своих домах.
* Пользователи могут устанавливать желаемую температуру.
* Система автоматически поддерживает заданную температуру, регулируя подачу тепла.

### Мониторинг температуры:

* Система получает данные о температуре с датчиков, установленных в домах.
* Пользователи могут просматривать текущую температуру в своих домах через веб-интерфейс.

### Архитектура монолитного приложения:

Собственно в тексте задания уже приведен анализ архитектуры монолита,
оставлю здесь именно его.

* Язык программирования: Java
* База данных: PostgreSQL
* Архитектура: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.
* Взаимодействие: Синхронное, запросы обрабатываются последовательно.
* Масштабируемость: Ограничена, так как монолит сложно масштабировать по частям.
* Развертывание: Требует остановки всего приложения.

## Доменная модель

Приведена на диаграмме DomainsContexts.puml

# Задание 1.2

Схемы приведены в файлах Task1.2_C2.puml и Task1.2_C3.puml

В С4 на уровне классов особого смысла здесь не вижу, 
т.к. уже на уровне компонентов де-факто оперируем java-классами

# Задание 1.3

ER-диаграмма приведена одна для всей системы, а не отдельная для каждого сервиса
с целью отражения полной картины.


# Задание 1.4

Описание API приведено в файлах api.yaml, расположенных в корне директорий сервисов 
device-manager-service и telemetry-manager-service
для сервисов управления устройствами и телеметрии, соответственно.

В реальном приложении конечно же управление пользователями я бы вынес
в отдельный сервис, но здесь слишком накладно по времени.
Причем скорее всего и работа с инфраструктурой поселков (сущности а-ля "поселок", "дом" и скорее всего "помещение")
в реальности была бы вынесена в отдельный сервис или группу сервисов.
Поэтому в рамках этой учебной работы принято решение оставить пользователей в рамках device-manager-service.
Здесь делаем предположение, что в веб-интерфейсе доступно id устройства пользователя,
по которому будем получать телеметрию из сервиса telemetry-manager-service.
Опять-таки ввиду дефицита времени ограничимся частными задачами просмотра телеметрии
заданного устройства, без, например, выборки устройств по домам, типам и пр. - 
считаем, что это утвержденные ограничения MVP. 


В реальном проекте это всё естественно
требует коммуникации с заказчиком и выяснения всех подробностей и выстраивания приоритетов
исходя из потребностей бизнеса (это из разряда "вы не подумайте, я умею правильно,
но в текущих условиях делаю по-быстрому, иначе есть риск ничего не успеть")

# Задания 2.1-2.2

Микросервисы реализованы в директориях device-manager-service и telemetry-manager-service
Монолит при этом отмирает (в репозитории остался, не мешает)

Касаемо развертывания в minikube и что вообще сделано локально:
* Развернуты локально в докере kafka и postgres (см. docker-compose в корне проекта)
* Протестировано взаимодействие с kafka (чтение телеметрии из топика, запись команд и статусов в топики)
* Настроена конфигурация kusk в api.yaml в каждом микросервисе
* Развернут локально minikube и helm
* С помощью helm также были подняты служебные сервисы (postgres, kafka), установлено командами helm install,
тут приложить нечего

Что НЕ сделано (прошу понять и простить):
* Не осилил проверить роутинг запросов в kusk. Залип в чехарде настроек между kusk и minikube,
последнее - это https://docs.kusk.io/guides/troubleshooting/#webhooks-timeouts-during-deployment
* Как альтернатива наставником было предложено развернуть всё в докере, но найти описание docker-compose для kusk так и не смог
(видимо его попросту нет), а развертывание какого-нибудь kong - это отдельная DevOps история с километровыми конфигами
* На правах коммуникации с заказчиком предлагаю вам эти разделы передать в ведение DevOps, архитектор же со своей стороны
предложил концепцию, прототипы сервисов и пакет документации


# Задание 3

Не выполнено, ибо жук-невывожук закопался в дедлайны по работе. А тем временем уже подходила к концу 1-я неделя следующего спринта...